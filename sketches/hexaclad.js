/* hexaclad */
shape(6)
	.diff(shape(6, [0.1, 0.5].smooth(), 0.1))
	.scale(0.8)
	.rotate(Math.PI / 2)
	.add(src(o0)
         .invert([0,0,1,0].smooth(0.1))
		.scroll([1, 1.2, 1.3333].fast(Math.random())
			.smooth(), [2, 3].fast(Math.random())
			.smooth(), Math.random() - 0.5, Math.random() - 0.5)
		.rotate(-Math.PI / 3)
		.repeat(3, 3)
		.kaleid([3, 6, -3, 12].fast(1/8).smooth(0.2))
		.rotate(Math.PI / 4, Math.random() - 0.5),
		[0.6, 0.99].fast(0.1)
		.smooth())
	.mask(shape(6)
		.scale(2.5))
	.out(o0)

osc(5, 0.4, [0.5, 1.5].fast(1 / 16)
		.smooth())
	.kaleid(10)
	.scroll(0.5, 5)
	.rotate(0, 0.3)
	.diff(src(o1)
		.repeat(4, 4))
	.out(o1)

src(o1)
	.scale([8, 0.8].fast(0.25)
		.smooth(0.5))
	.blend(src(o2)
		.kaleid(6)
		.scale([1.01, 0.99].smooth(0.6)), 0.90)
	.out(o2)

src(o2)
	.mult(o0)
	.add(o3, 0.4)
	.add(src(o2)
		.diff(o3)
		.mult(shape(6, 0.3, 1)
			.invert()), 0.3)
	.out(o3)

render(o3)

/* metadata = {"index":54,"type":"code","bpm":0,"midi":false,"local":false,"heat":5,"author":"Alex Szabo"} */